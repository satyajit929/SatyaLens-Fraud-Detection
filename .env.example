# FRAUD DETECTION SYSTEM - ENVIRONMENT CONFIGURATION TEMPLATE
# =============================================================================
# Copy this file to .env and update the values for your environment
# IMPORTANT: Never commit .env file to version control!

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=Fraud Detection System
APP_VERSION=1.0.0
ENVIRONMENT=development
DEBUG=true
SECRET_KEY=your-super-secret-key-change-this-in-production-minimum-32-characters-long
API_VERSION=v1
API_PREFIX=/api/v1

# Server Configuration
HOST=0.0.0.0
PORT=8000
WORKERS=4
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKER_CONNECTIONS=1000
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=100
TIMEOUT=30
KEEPALIVE=2
PRELOAD_APP=true

# Allowed Hosts (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0,fraud-detection.local

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Primary Database
DATABASE_URL=postgresql://fraud_user:fraud_pass@localhost:5432/fraud_detection
DB_HOST=localhost
DB_PORT=5432
DB_NAME=fraud_detection
DB_USER=fraud_user
DB_PASSWORD=fraud_pass
DB_SCHEMA=public

# Connection Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=false

# Read Replica (Optional)
READ_DATABASE_URL=postgresql://fraud_user:fraud_pass@localhost:5433/fraud_detection
READ_DB_HOST=localhost
READ_DB_PORT=5433

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Primary
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# Redis for Sessions
SESSION_REDIS_URL=redis://localhost:6379/1
SESSION_REDIS_DB=1

# Redis for Caching
CACHE_REDIS_URL=redis://localhost:6379/2
CACHE_REDIS_DB=2

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Configuration
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production-very-long-and-secure
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ISSUER=fraud-detection-system
JWT_AUDIENCE=fraud-detection-api

# Password Security
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true
BCRYPT_ROUNDS=12

# Session Configuration
SESSION_TIMEOUT_MINUTES=30
SESSION_COOKIE_NAME=fraud_session
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax

# API Keys
API_KEY_HEADER=X-API-Key
INTERNAL_API_KEY=your-internal-api-key-for-service-to-service-communication

# =============================================================================
# FRAUD DETECTION CONFIGURATION
# =============================================================================

# Risk Thresholds (0.0 to 1.0)
HIGH_RISK_THRESHOLD=0.8
MEDIUM_RISK_THRESHOLD=0.5
LOW_RISK_THRESHOLD=0.2
AUTO_DECLINE_THRESHOLD=0.9
AUTO_APPROVE_THRESHOLD=0.1

# Transaction Limits
MAX_TRANSACTION_AMOUNT=10000.00
MIN_TRANSACTION_AMOUNT=0.01
DAILY_TRANSACTION_LIMIT=50000.00
HOURLY_TRANSACTION_LIMIT=10000.00

# Velocity Limits
VELOCITY_LIMIT_PER_MINUTE=5
VELOCITY_LIMIT_PER_HOUR=50
VELOCITY_LIMIT_PER_DAY=200
MAX_FAILED_ATTEMPTS=3
LOCKOUT_DURATION_MINUTES=15

# Geographic Restrictions
ALLOWED_COUNTRIES=US,CA,GB,AU,DE,FR,IT,ES,NL,SE,NO,DK,FI
BLOCKED_COUNTRIES=
HIGH_RISK_COUNTRIES=

# =============================================================================
# MACHINE LEARNING CONFIGURATION
# =============================================================================

# Model Settings
ML_MODEL_PATH=./models/
MODEL_VERSION=v1.0.0
MODEL_FILE_NAME=fraud_detection_model.joblib
FEATURE_STORE_PATH=./data/features/
TRAINING_DATA_PATH=./data/training/

# Model Performance
MODEL_PERFORMANCE_THRESHOLD=0.85
MODEL_ACCURACY_THRESHOLD=0.90
MODEL_PRECISION_THRESHOLD=0.85
MODEL_RECALL_THRESHOLD=0.80

# Training Configuration
RETRAIN_INTERVAL_HOURS=24
MIN_TRAINING_SAMPLES=1000
MAX_TRAINING_SAMPLES=100000
TRAINING_TEST_SPLIT=0.2
CROSS_VALIDATION_FOLDS=5

# Feature Engineering
FEATURE_WINDOW_DAYS=30
AGGREGATION_PERIODS=1h,6h,24h,7d,30d
ENABLE_FEATURE_SCALING=true
ENABLE_FEATURE_SELECTION=true

# =============================================================================
# EXTERNAL API INTEGRATIONS
# =============================================================================

# Payment Processor APIs
STRIPE_API_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret
PAYPAL_CLIENT_ID=your_paypal_client_id
PAYPAL_CLIENT_SECRET=your_paypal_client_secret

# Geolocation Services
IP_GEOLOCATION_API_KEY=your_ip_geolocation_api_key
IP_GEOLOCATION_BASE_URL=https://api.ipgeolocation.io/ipgeo
MAXMIND_LICENSE_KEY=your_maxmind_license_key
MAXMIND_DATABASE_PATH=./data/geoip/

# External Fraud Databases
FRAUD_DATABASE_API_KEY=your_external_fraud_database_api_key
FRAUD_DATABASE_BASE_URL=https://api.frauddatabase.com/v1
BLACKLIST_API_KEY=your_blacklist_api_key
WHITELIST_API_KEY=your_whitelist_api_key

# Identity Verification
KYC_API_KEY=your_kyc_api_key
KYC_BASE_URL=https://api.kycprovider.com/v1
DOCUMENT_VERIFICATION_API_KEY=your_document_verification_api_key

# =============================================================================
# COMMUNICATION SERVICES
# =============================================================================

# Email Configuration (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_USE_SSL=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password
EMAIL_FROM=noreply@frauddetection.com
EMAIL_FROM_NAME=Fraud Detection System

# SendGrid (Alternative)
SENDGRID_API_KEY=SG.your_sendgrid_api_key
SENDGRID_FROM_EMAIL=noreply@frauddetection.com

# SMS Configuration (Twilio)
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=ACyour_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_VERIFY_SERVICE_SID=VAyour_verify_service_sid

# Alternative SMS Providers
NEXMO_API_KEY=your_nexmo_api_key
NEXMO_API_SECRET=your_nexmo_api_secret
AWS_SNS_ACCESS_KEY=your_aws_access_key
AWS_SNS_SECRET_KEY=your_aws_secret_key
AWS_SNS_REGION=us-east-1

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
LOG_ROTATION=daily

# Structured Logging
ENABLE_STRUCTURED_LOGGING=true
LOG_REQUEST_ID=true
LOG_USER_ID=true
LOG_CORRELATION_ID=true

# Elasticsearch Configuration
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_INDEX=fraud-detection-logs
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=
ELASTICSEARCH_TIMEOUT=30
ELASTICSEARCH_MAX_RETRIES=3

# Prometheus Configuration
PROMETHEUS_PORT=8001
PROMETHEUS_PATH=/metrics
METRICS_ENABLED=true
METRICS_INCLUDE_LABELS=true

# Sentry Error Tracking
SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# =============================================================================
# BACKGROUND TASKS (CELERY)
# =============================================================================

# Celery Broker & Backend
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/1
CELERY_TASK_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true

# Task Configuration
CELERY_TASK_ALWAYS_EAGER=false
CELERY_TASK_EAGER_PROPAGATES=true
CELERY_TASK_IGNORE_RESULT=false
CELERY_TASK_STORE_EAGER_RESULT=true
CELERY_TASK_TRACK_STARTED=true

# Worker Configuration
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_WORKER_MAX_MEMORY_PER_CHILD=200000
CELERY_WORKER_PREFETCH_MULTIPLIER=1

# Beat Schedule
CELERY_BEAT_SCHEDULE_FILENAME=celerybeat-schedule
CELERY_BEAT_SCHEDULER=django_celery_beat.schedulers:DatabaseScheduler

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================

# Cache Settings
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE=1000
CACHE_KEY_PREFIX=fraud_detection
ENABLE_CACHING=true

# Cache Types
USER_CACHE_TTL=1800
TRANSACTION_CACHE_TTL=300
MODEL_CACHE_TTL=7200
RULE_CACHE_TTL=3600

# =============================================================================
# RATE LIMITING
# =============================================================================

# API Rate Limits
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000
RATE_LIMIT_STORAGE=redis://localhost:6379/3

# Endpoint-specific Limits
AUTH_RATE_LIMIT_PER_MINUTE=10
ANALYSIS_RATE_LIMIT_PER_MINUTE=50
BATCH_RATE_LIMIT_PER_MINUTE=5

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGINS=["http://localhost:3000","http://localhost:8080","http://127.0.0.1:3000"]
CORS_METHODS=["GET","POST","PUT","DELETE","OPTIONS"]
CORS_HEADERS=["*"]
CORS_CREDENTIALS=true

# HTTPS & SSL
FORCE_HTTPS=false
SSL_CERT_PATH=./ssl/cert.pem
SSL_KEY_PATH=./ssl/key.pem
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# Security Headers
ENABLE_SECURITY_HEADERS=true
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block
REFERRER_POLICY=strict-origin-when-cross-origin

# =============================================================================
# FILE HANDLING
# =============================================================================

# File Upload Configuration
MAX_FILE_SIZE=10MB
ALLOWED_FILE_TYPES=csv,json,xlsx,pdf,jpg,png
UPLOAD_PATH=./uploads/
TEMP_PATH=./temp/
QUARANTINE_PATH=./quarantine/

# File Processing
ENABLE_VIRUS_SCANNING=false
VIRUS_SCANNER_API_KEY=your_virus_scanner_api_key
FILE_RETENTION_DAYS=30

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================

# WebSocket Settings
WS_ENABLED=true
WS_MAX_CONNECTIONS=1000
WS_HEARTBEAT_INTERVAL=30
WS_MESSAGE_MAX_SIZE=1MB
WS_COMPRESSION_ENABLED=true

# Real-time Features
ENABLE_REAL_TIME_ALERTS=true
ENABLE_REAL_TIME_MONITORING=true
ENABLE_REAL_TIME_NOTIFICATIONS=true

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test Database
TEST_DATABASE_URL=postgresql://fraud_user:fraud_pass@localhost:5432/fraud_detection_test
TEST_REDIS_URL=redis://localhost:6379/15

# Test Settings
RUN_TESTS_ON_STARTUP=false
TEST_DATA_PATH=./tests/data/
MOCK_EXTERNAL_APIS=true
TEST_COVERAGE_THRESHOLD=80

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups/
BACKUP_COMPRESSION=gzip

# Cloud Backup (AWS S3)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET=fraud-detection-backups
AWS_S3_REGION=us-east-1

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Core Features
ENABLE_REAL_TIME_MONITORING=true
ENABLE_ML_PREDICTIONS=true
ENABLE_RULE_ENGINE=true
ENABLE_EXTERNAL_API_CALLS=true
ENABLE_NOTIFICATIONS=true
ENABLE_AUDIT_LOGGING=true

# Advanced Features
ENABLE_BEHAVIORAL_ANALYSIS=true
ENABLE_DEVICE_FINGERPRINTING=true
ENABLE_GEOLOCATION_ANALYSIS=true
ENABLE_VELOCITY_CHECKING=true
ENABLE_PATTERN_RECOGNITION=true

# Experimental Features
ENABLE_AI_EXPLANATIONS=false
ENABLE_AUTOMATED_LEARNING=false
ENABLE_PREDICTIVE_ANALYTICS=false

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Development Tools
ENABLE_DEBUG_TOOLBAR=false
ENABLE_PROFILING=false
ENABLE_QUERY_LOGGING=false
ENABLE_REQUEST_LOGGING=true

# Development Database
DEV_DATABASE_SEED=true
DEV_CREATE_SAMPLE_DATA=true
DEV_SAMPLE_USERS=100
DEV_SAMPLE_TRANSACTIONS=1000

# =============================================================================
# PRODUCTION OPTIMIZATIONS
# =============================================================================

# Performance Settings
ENABLE_GZIP_COMPRESSION=true
ENABLE_STATIC_FILE_CACHING=true
STATIC_FILE_MAX_AGE=86400
ENABLE_DATABASE_QUERY_CACHE=true

# Resource Limits
MAX_CONCURRENT_REQUESTS=1000
MAX_REQUEST_SIZE=10MB
REQUEST_TIMEOUT=30
CONNECTION_TIMEOUT=5

# =============================================================================
# MONITORING ENDPOINTS
# =============================================================================

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
DEEP_HEALTH_CHECK_ENABLED=true

# Metrics
METRICS_PATH=/metrics
METRICS_BASIC_AUTH_USER=metrics
METRICS_BASIC_AUTH_PASSWORD=metrics123

# Status Page
STATUS_PAGE_ENABLED=true
STATUS_PAGE_PATH=/status
STATUS_PAGE_BASIC_AUTH=false

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# Analytics
GOOGLE_ANALYTICS_ID=GA-XXXXXXXXX
MIXPANEL_TOKEN=your_mixpanel_token

# Customer Support
INTERCOM_APP_ID=your_intercom_app_id
ZENDESK_SUBDOMAIN=your_zendesk_subdomain
ZENDESK_API_TOKEN=your_zendesk_api_token

# Business Intelligence
TABLEAU_SERVER_URL=https://your-tableau-server.com
POWERBI_WORKSPACE_ID=your_powerbi_workspace_id

# =============================================================================
# COMPLIANCE & AUDIT
# =============================================================================

# Compliance Settings
ENABLE_GDPR_COMPLIANCE=true
ENABLE_PCI_COMPLIANCE=true
ENABLE_SOX_COMPLIANCE=false
DATA_RETENTION_DAYS=2555  # 7 years

# Audit Configuration
AUDIT_LOG_ENABLED=true
AUDIT_LOG_PATH=./logs/audit.log
AUDIT_ALL_REQUESTS=false
AUDIT_SENSITIVE_OPERATIONS=true

# =============================================================================
# LOCALIZATION
# =============================================================================

# Internationalization
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,es,fr,de,it,pt,zh,ja
DEFAULT_TIMEZONE=UTC
DEFAULT_CURRENCY=USD

# =============================================================================
# CUSTOM BUSINESS RULES
# =============================================================================

# Business Hours (UTC)
BUSINESS_HOURS_START=09:00
BUSINESS_HOURS_END=17:00
BUSINESS_DAYS=1,2,3,4,5  # Monday to Friday

# Holiday Calendar
HOLIDAY_CALENDAR_ENABLED=true
HOLIDAY_CALENDAR_COUNTRY=US

# Custom Thresholds
VIP_CUSTOMER_THRESHOLD=100000
HIGH_VALUE_TRANSACTION=5000
SUSPICIOUS_PATTERN_THRESHOLD=3